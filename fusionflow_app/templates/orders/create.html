{% extends 'base.html' %}
{% block title %}Create Order - FusionFlow{% endblock %}
{% block content %}
<div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body">
        <h2 class="mb-4" style="color: var(--primary-color); font-weight: 700;">Create Order</h2>
        <form method="POST">
            <div class="mb-3">
                <label for="project_id" class="form-label">Project</label>
                <select class="form-select" id="project_id" name="project_id" required>
                    <option value="">Select Project</option>
                    {% for project in projects %}
                        <option value="{{ project.id }}">{{ project.name }}</option>
                    {% endfor %}
                </select>
                {% if projects|length == 0 %}
                    <div class="text-danger small mt-1">No active projects available. Please create a project first.</div>
                {% endif %}
            </div>
            <div class="mb-3">
                <label for="supplier_id" class="form-label">Supplier</label>
                <select class="form-select" id="supplier_id" name="supplier_id" required>
                    <option value="">Select Supplier</option>
                    {% for supplier in suppliers %}
                        <option value="{{ supplier.id }}">{{ supplier.name }}</option>
                    {% endfor %}
                </select>
                {% if suppliers|length == 0 %}
                    <div class="text-danger small mt-1">No approved suppliers available. Please add or approve a supplier first.</div>
                {% endif %}
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="2" required></textarea>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label for="quantity" class="form-label">Quantity</label>
                    <input type="number" class="form-control" id="quantity" name="quantity" min="1" required>
                </div>
                <div class="col">
                    <label for="unit_price" class="form-label">Unit Price</label>
                    <input type="number" class="form-control" id="unit_price" name="unit_price" min="0" step="0.01" required>
                </div>
            </div>
            <div class="mb-3">
                <label for="requested_delivery_date" class="form-label">Requested Delivery Date</label>
                <input type="date" class="form-control" id="requested_delivery_date" name="requested_delivery_date" required>
            </div>
            <div class="mb-3">
                <label for="priority" class="form-label">Priority</label>
                <select class="form-select" id="priority" name="priority">
                    <option value="Normal">Normal</option>
                    <option value="High">High</option>
                    <option value="Critical">Critical</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary w-100">Create Order</button>
        </form>
    </div>
</div>
{% endblock %} 